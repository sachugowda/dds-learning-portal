<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Distributed Database Systems - Learning Portal</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="setup-container">
        <div class="setup-card">
            <h1>üéì Distributed Database Systems</h1>
            <h2>Interactive Learning Portal</h2>
            
            <!-- Subject Overview & Learning Outcomes -->
            <section class="setup-section">
                <h3>üìò Subject Overview</h3>
                <div class="textbook-info">
                    <p><strong>Subject:</strong> Distributed Database Systems (DDS)</p>
                    <p><strong>Instructor:</strong> Dr. Sachin D N</p>
                    <p><strong>Learning Outcomes:</strong></p>
                    <ul style="margin-left: 20px; color: #666; line-height: 1.6;">
                        <li><strong>LO1:</strong> Understanding about distributed structures.</li>
                        <li><strong>LO2:</strong> Understanding of distributed storage systems and the technologies used to implement them.</li>
                        <li><strong>LO3:</strong> Understanding of distributed databases architecture.</li>
                        <li><strong>LO4:</strong> Understanding of parallel databases architecture and systems.</li>
                        <li><strong>LO5:</strong> Understanding of Hadoop environment and Big Data.</li>
                    </ul>
                </div>
            </section>

            <!-- Content Structure: 8 Modules -->
            <section class="setup-section">
                <h3>üìö Content Structure (8 Modules)</h3>
                <div class="textbook-info">
                    <div class="modules-grid">
                        <div class="module-card">
                            <h4>Module 1: Distributes Data Storage Technology</h4>
                            <ul>
                                <li>Server‚Äëcentric IT architecture and its limitations</li>
                                <li>Storage‚Äëcentric IT architecture and its advantages</li>
                                <li>Architecture of intelligent disk subsystems</li>
                                <li>Hard disks and internal I/O channels and JBOD</li>
                                <li>Storage virtualisation using RAID</li>
                                <li>Introduction to NAS, SAN and DAS</li>
                            </ul>
                        </div>
                        <div class="module-card">
                            <h4>Module 2: Distributed DBMS Architecture</h4>
                            <ul>
                                <li>Distributed DBMS</li>
                                <li>Distributed DBMS architecture</li>
                                <li>Distributed data sources</li>
                                <li>Distributed design issues</li>
                            </ul>
                        </div>
                        <div class="module-card">
                            <h4>Module 3: Distributed Database Design &amp; Integration</h4>
                            <ul>
                                <li>Distributed design issues</li>
                                <li>Top‚Äëdown design process</li>
                                <li>Fragmentation</li>
                                <li>Bottom‚Äëup design methodology</li>
                                <li>Allocation</li>
                                <li>Schema matching &amp; schema integration</li>
                                <li>Schema mapping</li>
                                <li>Data cleaning</li>
                            </ul>
                        </div>
                        <div class="module-card">
                            <h4>Module 4: Data and Access Control</h4>
                            <ul>
                                <li>Database security</li>
                                <li>Discretionary access control</li>
                                <li>Multilevel access control</li>
                                <li>Distributed access control</li>
                                <li>View management</li>
                                <li>Views in centralized DBMSs</li>
                                <li>Views in distributed DBMSs</li>
                                <li>Maintenance of materialized views</li>
                            </ul>
                        </div>
                        <div class="module-card">
                            <h4>Module 5: Data Replication</h4>
                            <ul>
                                <li>Consistency of replicated databases</li>
                                <li>Update management strategies</li>
                                <li>Replication protocols</li>
                                <li>Replication and failures</li>
                                <li>Replication mediator service</li>
                            </ul>
                        </div>
                        <div class="module-card">
                            <h4>Module 6: Parallel Database Systems</h4>
                            <ul>
                                <li>Parallel database system architectures</li>
                                <li>Parallel data placement</li>
                                <li>Load balancing</li>
                                <li>Database clusters</li>
                            </ul>
                        </div>
                        <div class="module-card">
                            <h4>Module 7: Web Data Management</h4>
                            <ul>
                                <li>Web search and web crawling</li>
                                <li>Indexing, ranking and link analysis</li>
                                <li>Keyword search</li>
                                <li>Web querying</li>
                                <li>Semi‚Äëstructured data approach</li>
                                <li>Web query language approach</li>
                                <li>Question answering</li>
                                <li>Searching and querying the hidden web</li>
                            </ul>
                        </div>
                        <div class="module-card">
                            <h4>Module 8: Hadoop &amp; Big Data</h4>
                            <ul>
                                <li>Introduction to Hadoop and Big Data</li>
                                <li>HDFS operations and commands</li>
                                <li>MapReduce</li>
                                <li>Big Data overview</li>
                                <li>Multi‚Äënode cluster setup steps</li>
                                <li>Big Data solutions</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Textbooks and References -->
            <section class="setup-section">
                <h3>üìñ Recommended Textbooks & References</h3>
                <div class="textbook-info">
                    <p><strong>Main reference:</strong></p>
                    <ul style="margin-left: 20px; color: #666; line-height: 1.6;">
                        <li>√ñzsu &amp; Valduriez, <em>Principles of Distributed Database Systems</em> (Springer). See publisher link: <a href="https://link.springer.com/book/10.1007/978-1-4419-8834-8" target="_blank">Springer textbook page</a>.</li>
                    </ul>
                    <p><strong>Additional reading (optional):</strong></p>
                    <ul style="margin-left: 20px; color: #666; line-height: 1.6;">
                        <li>Silberschatz, Korth &amp; Sudarshan, <em>Database System Concepts</em> ‚Äì chapters on distributed databases.</li>
                        <li>Garcia‚ÄëMolina, Ullman &amp; Widom, <em>Database Systems: The Complete Book</em> ‚Äì distributed databases and transactions.</li>
                    </ul>
                </div>
            </section>

            <!-- Google Gemini API Setup -->
            <section class="setup-section">
                <h3>üîë Google Gemini AI Tutor Setup</h3>
                <p class="description">
                    This portal uses Google Gemini for AI tutoring and adaptive testing.  
                    Please configure your free Gemini API key before entering the learning portal.
                </p>
                <div class="input-group">
                    <label for="apiKey">Gemini API Key:</label>
                    <input type="password" id="apiKey" placeholder="Enter your Gemini API key">
                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                        <button onclick="saveAPIKey()" class="btn-primary">Save API Key</button>
                        <button onclick="testAPIKeyConnection()" class="btn-primary" style="background: #4caf50;">Test Connection</button>
                    </div>
                </div>
                
                <div class="instructions">
                    <h4>How to get your free API key:</h4>
                    <ol>
                        <li>Visit <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a></li>
                        <li>Sign in with your Google account</li>
                        <li>Click "Create API Key"</li>
                        <li>Copy the generated key and paste it above</li>
                        <li><strong>Note:</strong> Free tier includes generous usage limits for learning</li>
                    </ol>
                </div>
                
                <div id="apiStatus" class="status-message"></div>
            </section>
            
            <!-- Navigation to Portal -->
            <section class="setup-section">
                <h3>üöÄ Ready to Start Learning?</h3>
                <p class="description">
                    Click below to enter the main learning portal.  
                    Make sure your Gemini API key is configured and tested.
                </p>
                <button onclick="goToPortal()" class="btn-primary btn-large">Enter Learning Portal</button>
            </section>
        </div>
    </div>
    
    <script src="js/gemini-api.js"></script>
    <script>
        window.onload = function() {
            const savedKey = localStorage.getItem('gemini_api_key');
            const apiInput = document.getElementById('apiKey');

            if (savedKey) {
                apiInput.value = '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢';
                showStatus('API key is already configured. You can test it or proceed to portal.', 'success');
            }
        };
        
        function saveAPIKey() {
            const apiKey = document.getElementById('apiKey').value.trim();
            if (!apiKey || apiKey === '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢') {
                showStatus('Please enter a valid API key.', 'error');
                return;
            }
            
            localStorage.setItem('gemini_api_key', apiKey);
            showStatus('‚úÖ API key saved successfully! Click "Test Connection" to verify.', 'success');
            document.getElementById('apiKey').value = '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢';
        }
        
        async function testAPIKeyConnection() {
            const apiKey = document.getElementById('apiKey').value.trim();
            if (!apiKey || apiKey === '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢') {
                const savedKey = localStorage.getItem('gemini_api_key');
                if (!savedKey) {
                    showStatus('Please enter and save your API key first.', 'error');
                    return;
                }
            } else {
                localStorage.setItem('gemini_api_key', apiKey);
            }
            
            showStatus('Testing API connection... Please wait.', 'success');
            
            try {
                // Try direct test first for better diagnostics
                const directResult = await testAPIDirect();
                if (directResult.success) {
                    showStatus('‚úÖ API connection successful! (' + directResult.method + ' method) You can now proceed to the portal.', 'success');
                    return;
                }
                
                // Fallback to main test
                const result = await testAPIKey();
                if (result.success) {
                    showStatus('‚úÖ API connection successful! You can now proceed to the portal.', 'success');
                } else {
                    showStatus('‚ùå API test failed:\n' + result.message.replace(/\n/g, '<br>'), 'error');
                }
            } catch (error) {
                showStatus('‚ùå Error testing API: ' + error.message, 'error');
            }
        }
        
        function showStatus(message, type) {
            const statusDiv = document.getElementById('apiStatus');
            statusDiv.textContent = message;
            statusDiv.className = 'status-message ' + type;
            statusDiv.style.display = 'block';
        }
        
        function goToPortal() {
            const apiKey = localStorage.getItem('gemini_api_key');
            if (!apiKey) {
                showStatus('Please configure your Gemini API key first.', 'error');
                return;
            }
            window.location.href = 'portal.html';
        }
    </script>
</body>
</html>
